<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>

		<!-- crm categories -->
		<record model="crm.case.categ" id="categ_support">
			<field name="name">Support</field>
			<field name="section_id" ref="sales_team.section_sales_department"/>
            <field name="object_id" search="[('model','=','crm.lead')]" model="ir.model"/>
		</record>
		<record model="crm.case.categ" id="categ_subscription">
			<field name="name">Subscribe</field>
			<field name="section_id" ref="sales_team.section_sales_department"/>
            <field name="object_id" search="[('model','=','crm.lead')]" model="ir.model"/>
		</record>
        <record model="crm.case.categ" id="categ_confirm">
            <field name="name">Confirm</field>
            <field name="section_id" ref="sales_team.section_sales_department"/>
            <field name="object_id" search="[('model','=','crm.lead')]" model="ir.model"/>
        </record>


        <!-- Send confirmation mail when creating new Subscription Lead. -->
        <record id="filter_subscription_lead" model="ir.filters">
            <field name="name">Subscription Leads</field>
            <field name="model_id">crm.lead</field>
            <field name="domain">[('email_from','!=','')]</field>
            <field name="user_id" eval="False"/>
        </record>
        <record id="action_send_subscription_confirm" model="ir.actions.server">
            <field name="name">Send subscription confirmation mail.</field>
            <field name="model_id" ref="crm.model_crm_lead"/>
            <field name="condition">True</field>
            <field name="type">ir.actions.server</field>
            <field name="state">email</field>
            <field name="template_id" ref="pdsl_fetchmail_subscription_confirm_email_template"/>
        </record>
        <record id="rule_send_subscription_confirm" model="base.action.rule">
            <field name="name">Send confirm mail subscription for Lead received.</field>
            <field name="model_id" ref="crm.model_crm_lead"/>
            <field name="sequence">2</field>
            <field name="kind">on_create</field>
            <field name="filter_id" ref="filter_subscription_lead"/>
            <field name="act_user_id" ref="base.user_root"/>
            <field name="server_action_ids" eval="[(6,0,[ref('action_send_support_confirm')])]"/>
        </record>


	</data>
</openerp>
